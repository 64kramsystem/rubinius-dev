#!/usr/bin/env ruby

require 'rubygems'
require 'sydparse'
require 'pp'

if ARGV.first == "-l"
    newlines = true
    ARGV.shift
elsif ARGV.first == "-u"
    unified = true
    ARGV.shift
elsif ARGV.first == "-s"
    simple = true
    ARGV.shift
end

name = ARGV.shift
File.open(name, "r") do |fd|
    if unified
        pp SydneyParser.unified_sexp(fd)
    else
        syd = SydneyParser.load_file fd
        out = syd.sexp(false, newlines)
        if simple
          p out
        else
          pp out
        end
    end
end

---
mnemonic: set_local
operation: >-
  Sets the value of a local variable
format: set_local locl
opcode: 17
stack_before:
  - value
  - ...
stack_after:
  - value
  - ...
description: >-
  Pops _value_ off the stack, and uses it to set the value of the local
  variable identified by the literal _locl_. The value is then pushed back onto
  the stack, to represent the return value from the expression.
source: |-
    next_int;
    t1 = stack_pop();
    // printf("Set local %d to %s\n", _int, _inspect(t1));
    t2 = cpu_current_locals(state, c);
    if(t2->gc_zone == 0) {
      sassert(_int < NUM_FIELDS(t2) && "locals tuple sized wrong");
      fast_unsafe_set(t2, _int, t1);
    } else {
      tuple_put(state, t2, _int, t1);
    }
    stack_push(t1);

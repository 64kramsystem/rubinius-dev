---
mnemonic: send_off_stack
operation: >-
  Calls the method specified on the top of the stack on an object
format: send_off_stack
opcode: 88
stack_before:
  - mthd
  - blck
  - recv
  - arg1
  - arg2
  - ...
  - argn
  - ...
stack_after:
  - retval
  - ...
description: >-
  Pops the name of the method _mthd_ to call off the stack, and if necessary,
  converts it to a symbol. Then pops any block _blck_ and the receiver _recv_
  off the stack. Any arguments required by the method must have been placed on
  the stack previously, and the number of arguments set in the args register.
  The arguments will be popped from the stack and converted to locals when the
  method is activated.

  When the method returns, the return value will be on top of the stack.
see:
  - set_args
  - cast_array_for_args
notes: >-
  The number of arguments to be passed to the method in _args_ must have been
  set previously via a call to either "set_args":set_args.html or
  "cast_array_for_args":cast_array_for_args.html.
source: |-
    t3 = stack_pop();
    if(!SYMBOL_P(t3)) {
      if(RISA(t3, string)) {
        t3 = string_to_sym(state, t3);
      } else {
        t2 = stack_pop();
        t1 = stack_pop();
        stack_push(t3);
        _lit = global->sym_send;
        j = c->args;
        goto perform_send;
      }
    }
    t2 = stack_pop();
    t1 = stack_pop();
    _lit = t3;
    j = c->args;
    goto perform_send;

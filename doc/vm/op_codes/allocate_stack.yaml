---
mnemonic: allocate_stack
operation: >-
  Allocate space for local variables on the stack (deprecated)
format: allocate_stack count
opcode: 97
stack_before:
  - ...
stack_after:
  - nil
  - nil
  - ...
  - nil
  - ...
description: >-
  Allocate _count_ new slots for local variables on the stack. All allocated
  slots will be initialized to the special value @nil@.

  This opcode is now deprecated, and is not currently used under compiler2.
notes: >-
  Previously, if a local variable is defined in a method and not captured by a
  block (i.e. a closure), it's storage could be allocated on the stack. Although
  more efficient than storing such locals in the locals tuple, this complicated
  local variable management, and as such, its use has been deprecated under
  compiler2.
source: |-
    next_int;
    /* The stack must be initialized to nil because any refers that
       were there are probably bad. */
    for(k = 0; k <= _int; k++) {
      *++c->sp_ptr = Qnil;
    }

---
mnemonic: cast_array
operation: >-

format: cast_array
opcode: 48
stack_before:
  - <consumed>
  - ...
stack_after:
  - <produced>
  - ...
description: >-

source: |-
    t1 = stack_pop();
    if(REFERENCE_P(t1) && object_kind_of_p(state, t1, state->global->tuple)) {
      t1 = array_from_tuple(state, t1);
    } else if(!REFERENCE_P(t1) || !object_kind_of_p(state, t1, state->global->array)) {
      t2 = array_new(state, 1);
      array_set(state, t2, 0, t1);
      t1 = t2;
    }
    stack_push(t1);

---
mnemonic: send_with_arg_register
operation: >-
  Sends a message with args to a receiver
format: send_with_arg_register mthd
opcode: 61
stack_before:
  - recv
  - blck
  - arg1
  - arg2
  - ...
  - argn
  - ...
stack_after:
  - retval
  - ...
description: >-
  Pops the receiver _recv_ and a block _blck_ off the top of the stack, and
  sends the message _mthd_. The number of arguments taken by the method must
  have previously been set in the args register, and the arg values themselves
  remain on the top of the stack, to be converted to locals as part of method
  activation.

  When the method returns, the return value will be on top of the stack.
see:
  - send_method
  - set_args
  - cast_array_for_args
notes: >-
  The number of arguments to be passed to the method in _args_ must have been
  set previously via a call to either "set_args":set_args.html or
  "cast_array_for_args":cast_array_for_args.html.
source: |-
    next_literal;
    t1 = stack_pop();
    t2 = stack_pop();
    j = c->args;
    
    perform_send:
    
    _inline_cpu_unified_send(state, c, t1, _lit, j, t2);
